<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/1f86900aba1a6433.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/43b3c97735dbc54a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/99f6a99e5e57ec87.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-daf7175bc37baf20.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-2a48348db6e9e5e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-38dca328e8a8de9d.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-d4767c0c82b0abc6.js" as="script"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-N3DJ3JTVT2"/><link rel="icon" href="/favicon.png?&lt;generated&gt;" type="image/&lt;generated&gt;" sizes="&lt;generated&gt;"/><title>9月23日Spring笔记 - 流年石刻</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f"><div class="article_pageBody__Bryg4"><div class="header_header__us6ao"><div class="header_topHeader__xNJQ1"><a href="/"><div class="header_logo__IbzcJ">流年石刻</div></a><div class="menu_menuBox__ZCxZE"><a href="/"><p style="--icon-unSelected:url(/icons/home_gray.svg);--icon-selected:url(/icons/home_black.svg)" class="menu_navListItem__znGi9">首页</p></a><a href="/articles/all/1/"><p style="--icon-unSelected:url(/icons/article_gray.svg);--icon-selected:url(/icons/article_black.svg)" class="menu_navListItemSelected__JZBTq">文章</p></a><a href="/about/"><p style="--icon-unSelected:url(/icons/about_gray.svg);--icon-selected:url(/icons/about_black.svg)" class="menu_navListItem__znGi9">关于</p></a><a href="/search/"><p style="--icon-unSelected:url(/icons/search_gray.svg);--icon-selected:url(/icons/search_black.svg)" class="menu_navListItem__znGi9">搜索</p></a></div><div class="header_iconArea__Co05n"><img alt="menu" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" class="header_menuIcon__7dQN0" style="color:transparent" src="/_next/static/media/menu.c309d6d5.svg"/></div></div><div class="mobileMenu_mobileMenu__Mz_1e mobileMenu_menuContainer__hndoP "><a href="/"><div style="--icon-unSelected:url(/icons/home_gray.svg);--icon-selected:url(/icons/home_black.svg)" class="mobileMenu_item__pY1st ">首页</div></a><a href="/articles/all/1/"><div style="--icon-unSelected:url(/icons/article_gray.svg);--icon-selected:url(/icons/article_black.svg)" class="mobileMenu_item__pY1st mobileMenu_itemSelected__d5YAL">文章</div></a><a href="/about/"><div style="--icon-unSelected:url(/icons/about_gray.svg);--icon-selected:url(/icons/about_black.svg)" class="mobileMenu_item__pY1st ">关于</div></a><a href="/search/"><div style="--icon-unSelected:url(/icons/search_gray.svg);--icon-selected:url(/icons/search_black.svg)" class="mobileMenu_item__pY1st ">搜索</div></a></div></div><div class="article_pageBodyMain___x_AF"><div class="sidebar_sidebar__6HDFv sidebar_open__ia_Zv"><div class="sidebar_sidebarInner__NiyBR"><div class="topImgBox_topImgBox__2OSEr"><img alt="" loading="lazy" width="1024" height="1024" decoding="async" data-nimg="1" class="topImgBox_topImg__6hmTH" style="color:transparent" src="/_next/static/media/author.2cacf696.jpg"/><div class="topImgBox_textArea__iSnnz"><div class="topImgBox_author__URTnh">星玉龙</div><div class="topImgBox_position__7qz_f">前端工程师</div><a class="topImgBox_email__skkTy" href="mailto:me@timeshike.com">me@timeshike.com</a><a class="topImgBox_githubBtn__YYbAh" href="https://github.com/hixyl">Github</a><div class="topImgBox_content__lmDiZ">闲云潭影，物换星移<br/>滕王高阁，几度春秋<br/>故人不在，长江空流<br/>月圆复缺，岁月悠悠<br/></div><div class="topImgBox_bottomBtns__EIkFU"><a href="/atom.xml"><img alt="rss" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/rss.d066fc0f.svg"/></a></div></div></div></div><div class="sidebar_btnArea__Wtf3d"><div class="sidebar_btnRect__RQ7s5"><img alt="rightArray" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="sidebar_imgBtn__gmp3y" style="color:transparent" src="/_next/static/media/left_array.0dce0964.svg"/></div></div></div><div class="article_articleContainer__uRwUh scrollContent"><div class="article_articleBody__0coIY scrollContent"><h1 style="margin-bottom:0.1rem;margin-top:0.2rem">9月23日Spring笔记</h1><div><div class="tags_tags__qM_Ja"><p class="tags_label__Rg6b2">分类</p><a href="/articles/新知笔记/1/"><p class="tags_tag__HZYxk tags_tagLink__gnw9V">新知笔记</p></a><a href="/articles/后端学习/1/"><p class="tags_tag__HZYxk tags_tagLink__gnw9V">后端学习</p></a></div><div class="tags_tags__qM_Ja"><p class="tags_label__Rg6b2">标签</p><p class="tags_tag__HZYxk ">java</p><p class="tags_tag__HZYxk ">后端</p><p class="tags_tag__HZYxk ">spring</p><p class="tags_tag__HZYxk ">springMVC</p><p class="tags_tag__HZYxk ">文件上传</p></div></div><article>
    <p class="time">发布时间：<time datetime="24 September, 2022">2022-09-24 08:25:28</time></p>
    <p class="words">本文字数：302 字       阅读完需：约 3 分钟</p>
    <html><head></head><body><h2>springmvc文件上传</h2>
<h3>前端实现</h3>
<p>前端使用bootstrap</p>
<p>file.html</p>
<pre><code class="language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>上传<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>日志记录<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/jquery-2.1.0.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/bootstrap.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/docs.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../css/bootstrap.min.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
        $(()=&gt;{
            $(<span class="hljs-string">"#import"</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
                <span class="hljs-keyword">let</span> files = $(<span class="hljs-string">'#csv_file'</span>).<span class="hljs-title function_">prop</span>(<span class="hljs-string">'files'</span>);
                <span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
                data.<span class="hljs-title function_">append</span>(<span class="hljs-string">'myFile'</span>, files[<span class="hljs-number">0</span>]);

                $.<span class="hljs-title function_">ajax</span>({
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'POST'</span>,
                    <span class="hljs-attr">url</span>: <span class="hljs-string">"myFile.action"</span>,
                    <span class="hljs-attr">data</span>: data,
                    <span class="hljs-attr">cache</span>: <span class="hljs-literal">false</span>,
                    <span class="hljs-attr">processData</span>: <span class="hljs-literal">false</span>,
                    <span class="hljs-attr">contentType</span>: <span class="hljs-literal">false</span>,
                    <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ret</span>) {
                        <span class="hljs-title function_">alert</span>(ret);
                    }
                });
            });
        })
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"myFile.action"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>选择文件<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"myFile"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>上传<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ajax上传文件<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"myFile.action"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>选择文件<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"csv_file"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"myFile"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"import"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>&gt;</span>上传<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3>后端</h3>
<p><code><span class="hljs-keyword">spring</span>-mvc.xml</code>配置</p>
<pre><code class="language-xml"><span class="hljs-comment">&lt;!-- 此处必须有id属性 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"multipartResolver"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"defaultEncoding"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"utf-8"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code></pre>
<p>WorkController.java</p>
<pre><code class="language-java">    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/file.action"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">file</span>(<span class="hljs-params"></span>){
        <span class="hljs-keyword">return</span> <span class="hljs-string">"file"</span>;
    }

    <span class="hljs-meta">@ResponseBody</span>
    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/myFile.action"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">myFile</span>(<span class="hljs-params">MultipartFile myFile</span>){
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(myFile);
        <span class="hljs-keyword">return</span> myFile.<span class="hljs-title function_">getContentType</span>();
    }
</code></pre>
<h2>拦截器</h2>
<p>implements <code><span class="hljs-attribute">HandlerInterceptor</span></code>接口</p>
<p>preHandle: 前置拦截</p>
<p>spring-mvc.xml</p>
<pre><code class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/**"</span>/&gt;</span>
            <span class="hljs-comment">&lt;!-- 排除不适用拦截器的路径 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/login.action"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/work/**"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.zr.interceptor.SessionInterceptor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span>
</code></pre>
<p>SessionInterceptor.java</p>
<pre><code class="language-java">package com.zr.interceptor;

<span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;
<span class="hljs-keyword">import</span> com.zr.utils.AjaxResult;
<span class="hljs-keyword">import</span> com.zr.vo.<span class="hljs-keyword">User</span>;
<span class="hljs-keyword">import</span> org.springframework.util.StringUtils;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;

<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> java.io.PrintWriter;

<span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> SessionInterceptor implements HandlerInterceptor {
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> preHandle(HttpServletRequest request, HttpServletResponse response, <span class="hljs-keyword">Object</span> <span class="hljs-keyword">handler</span>) throws <span class="hljs-keyword">Exception</span> {
//        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">handler</span>);
        //判断是否为ajax请求，默认不是
        String <span class="hljs-keyword">header</span> = request.getHeader("x-requested-with");


        <span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = (<span class="hljs-keyword">User</span>)request.getSession().getAttribute("user");
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">user</span>==<span class="hljs-keyword">null</span>||<span class="hljs-keyword">user</span>.getUserId()==<span class="hljs-keyword">null</span>||<span class="hljs-keyword">user</span>.getUserId().equals("")){
            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println("未登录");
            <span class="hljs-keyword">if</span>(StringUtils.hasLength(<span class="hljs-keyword">header</span>) &amp;&amp; <span class="hljs-keyword">header</span>.equals("XMLHttpRequest")){
                response.setContentType("text/html;charset=utf-8");
                response.setCharacterEncoding("utf-8");
                PrintWriter o = response.getWriter();
                o.<span class="hljs-keyword">write</span>(<span class="hljs-type">JSON</span>.toJSONString(AjaxResult.fail(<span class="hljs-number">200</span>, "用户未登录",<span class="hljs-keyword">null</span>)));
            }
            <span class="hljs-keyword">else</span>{
                response.sendRedirect(request.getContextPath()+"/user/login.action");
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
}

</code></pre>
<p>web.xml :设置session失效时间</p>
<pre><code class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span>
<span class="hljs-comment">&lt;!--    session失效时间：15分钟--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span>
</code></pre>
</body></html>
  </article><div class="Toastify"></div><div class="bottomBar_bottomBar__uHU1W"><div class="bottomBar_text__iz3cM">Powerd by<a href="https://github.com/hixyl/YlBlog"> YlBlog(玉龙博客)</a></div></div></div></div></div></div><script src="/_next/static/chunks/webpack-daf7175bc37baf20.js" async=""></script><script src="/_next/static/chunks/fd9d1056-2a48348db6e9e5e0.js" async=""></script><script src="/_next/static/chunks/596-38dca328e8a8de9d.js" async=""></script><script src="/_next/static/chunks/main-app-d4767c0c82b0abc6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/1f86900aba1a6433.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/43b3c97735dbc54a.css\",{\"as\":\"style\"}]\n5:HL[\"/_next/static/css/99f6a99e5e57ec87.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"6:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-daf7175bc37baf20.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\n8:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-daf7175bc37baf20.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"GlobalError\",\"async\":false}\n9:I{\"id\":3015,\"chunks\":[\"185:static/chunks/app/layout-95b96ad4b83a9888.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":77"])</script><script>self.__next_f.push([1,"67,\"chunks\":[\"272:static/chunks/webpack-daf7175bc37baf20.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-daf7175bc37baf20.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\nd:I{\"id\":5345,\"chunks\":[\"185:static/chunks/app/layout-95b96ad4b83a9888.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1f86900aba1a6433.css\",\"precedence\":\"next\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"pZsTogNMwiK-GhyXDAlIH\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/article/9%E6%9C%8823%E6%97%A5Spring%E7%AC%94%E8%AE%B0/\",\"initialTree\":[\"\",{\"children\":[\"article\",{\"children\":[[\"id\",\"9%E6%9C%8823%E6%97%A5Spring%E7%AC%94%E8%AE%B0\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"9月23日Spring笔记\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L7\",\"globalErrorComponent\":\"$8\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"zh\",\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.png?\u003cgenerated\u003e\",\"type\":\"image/\u003cgenerated\u003e\",\"sizes\":\"\u003cgenerated\u003e\"}],[\"$\",\"$L9\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-N3DJ3JTVT2\"}],[\"$\",\"$L9\",null,{\"id\":\"google-analytics\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n        \\n          gtag('config', 'G-N3DJ3JTVT2');\\n        \"}],[\"$\",\"body\",null,{\"className\":\"__className_20951f\",\"children\":[[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\",[\"id\",\"9%E6%9C%8823%E6%97%A5Spring%E7%AC%94%E8%AE%B0\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",null],\"segment\":\"__PAGE__?{\\\"id\\\":\\\"9月23日Spring笔记\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/43b3c97735dbc54a.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/99f6a99e5e57ec87.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"id\",\"9%E6%9C%8823%E6%97%A5Spring%E7%AC%94%E8%AE%B0\",\"d\"]},\"styles\":[]}],\"segment\":\"article\"},\"styles\":[]}],[\"$\",\"$Ld\",null,{}]]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":4733,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":6697,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\n10:I{\"id\":6685,\"chunks\":"])</script><script>self.__next_f.push([1,"[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\n12:I{\"id\":8914,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":2953,\"chunks\":[\"165:static/chunks/16"])</script><script>self.__next_f.push([1,"5-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\n14:I{\"id\":633,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"945:static/chunks/945-dd57d3732d1beca5.js\",\"985:static/chunks/985-6bd998473d3be578.js\",\"241:static/chunks/app/article/[id]/page-87471cc585231b54.js\"],\"name\":\"\",\"async\":false}\n11:T39f9,"])</script><script>self.__next_f.push([1,"\n    \u003cp class=\"time\"\u003e发布时间：\u003ctime datetime=\"24 September, 2022\"\u003e2022-09-24 08:25:28\u003c/time\u003e\u003c/p\u003e\n    \u003cp class=\"words\"\u003e本文字数：302 字       阅读完需：约 3 分钟\u003c/p\u003e\n    \u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003ch2\u003espringmvc文件上传\u003c/h2\u003e\n\u003ch3\u003e前端实现\u003c/h3\u003e\n\u003cp\u003e前端使用bootstrap\u003c/p\u003e\n\u003cp\u003efile.html\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"hljs-keyword\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elang\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"en\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"UTF-8\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e上传\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"UTF-8\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e日志记录\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"../js/jquery-2.1.0.js\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"../js/bootstrap.min.js\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"../js/docs.min.js\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erel\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"stylesheet\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"../css/bootstrap.min.css\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"language-javascript\"\u003e\n        $(()=\u0026gt;{\n            $(\u003cspan class=\"hljs-string\"\u003e\"#import\"\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eclick\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e files = $(\u003cspan class=\"hljs-string\"\u003e'#csv_file'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eprop\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'files'\u003c/span\u003e);\n                \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFormData\u003c/span\u003e();\n                data.\u003cspan class=\"hljs-title function_\"\u003eappend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'myFile'\u003c/span\u003e, files[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]);\n\n                $.\u003cspan class=\"hljs-title function_\"\u003eajax\u003c/span\u003e({\n                    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'POST'\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"myFile.action\"\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: data,\n                    \u003cspan class=\"hljs-attr\"\u003ecache\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003eprocessData\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003econtentType\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n                    \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003eret\u003c/span\u003e) {\n                        \u003cspan class=\"hljs-title function_\"\u003ealert\u003c/span\u003e(ret);\n                    }\n                });\n            });\n        })\n    \u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eaction\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"myFile.action\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"post\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eenctype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"multipart/form-data\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-group\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e选择文件\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"file\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"myFile\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"btn btn-default\"\u003c/span\u003e\u0026gt;\u003c/span\u003e上传\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003eajax上传文件\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form-group\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"form\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eaction\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"myFile.action\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"post\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eenctype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"multipart/form-data\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e选择文件\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"file\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"csv_file\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"myFile\"\u003c/span\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"import\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"button\"\u003c/span\u003e\u0026gt;\u003c/span\u003e上传\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e后端\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003e\u003cspan class=\"hljs-keyword\"\u003espring\u003c/span\u003e-mvc.xml\u003c/code\u003e配置\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-xml\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u0026lt;!-- 此处必须有id属性 --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebean\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"multipartResolver\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"defaultEncoding\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebean\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWorkController.java\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-java\"\u003e    \u003cspan class=\"hljs-meta\"\u003e@GetMapping\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/file.action\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efile\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"file\"\u003c/span\u003e;\n    }\n\n    \u003cspan class=\"hljs-meta\"\u003e@ResponseBody\u003c/span\u003e\n    \u003cspan class=\"hljs-meta\"\u003e@PostMapping\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/myFile.action\"\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emyFile\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eMultipartFile myFile\u003c/span\u003e){\n        \u003cspan class=\"hljs-title class_\"\u003eSystem\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eout\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(myFile);\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e myFile.\u003cspan class=\"hljs-title function_\"\u003egetContentType\u003c/span\u003e();\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e拦截器\u003c/h2\u003e\n\u003cp\u003eimplements \u003ccode\u003e\u003cspan class=\"hljs-attribute\"\u003eHandlerInterceptor\u003c/span\u003e\u003c/code\u003e接口\u003c/p\u003e\n\u003cp\u003epreHandle: 前置拦截\u003c/p\u003e\n\u003cp\u003espring-mvc.xml\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-xml\"\u003e    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emvc:interceptors\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emvc:interceptor\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emvc:mapping\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/**\"\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-comment\"\u003e\u0026lt;!-- 排除不适用拦截器的路径 --\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emvc:exclude-mapping\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/user/login.action\"\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emvc:exclude-mapping\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/work/**\"\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebean\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"com.zr.interceptor.SessionInterceptor\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebean\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003emvc:interceptor\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003emvc:interceptors\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSessionInterceptor.java\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-java\"\u003epackage com.zr.interceptor;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.alibaba.fastjson.JSON;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.zr.utils.AjaxResult;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.zr.vo.\u003cspan class=\"hljs-keyword\"\u003eUser\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e org.springframework.util.StringUtils;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e org.springframework.web.servlet.HandlerInterceptor;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletRequest;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletResponse;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e java.io.PrintWriter;\n\n\u003cspan class=\"hljs-built_in\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e SessionInterceptor implements HandlerInterceptor {\n    @Override\n    \u003cspan class=\"hljs-built_in\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eboolean\u003c/span\u003e preHandle(HttpServletRequest request, HttpServletResponse response, \u003cspan class=\"hljs-keyword\"\u003eObject\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ehandler\u003c/span\u003e) throws \u003cspan class=\"hljs-keyword\"\u003eException\u003c/span\u003e {\n//        \u003cspan class=\"hljs-keyword\"\u003eSystem\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003eout\u003c/span\u003e.println(\u003cspan class=\"hljs-keyword\"\u003ehandler\u003c/span\u003e);\n        //判断是否为ajax请求，默认不是\n        String \u003cspan class=\"hljs-keyword\"\u003eheader\u003c/span\u003e = request.getHeader(\"x-requested-with\");\n\n\n        \u003cspan class=\"hljs-keyword\"\u003eUser\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003euser\u003c/span\u003e = (\u003cspan class=\"hljs-keyword\"\u003eUser\u003c/span\u003e)request.getSession().getAttribute(\"user\");\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003euser\u003c/span\u003e==\u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e||\u003cspan class=\"hljs-keyword\"\u003euser\u003c/span\u003e.getUserId()==\u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e||\u003cspan class=\"hljs-keyword\"\u003euser\u003c/span\u003e.getUserId().equals(\"\")){\n            \u003cspan class=\"hljs-keyword\"\u003eSystem\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003eout\u003c/span\u003e.println(\"未登录\");\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(StringUtils.hasLength(\u003cspan class=\"hljs-keyword\"\u003eheader\u003c/span\u003e) \u0026amp;\u0026amp; \u003cspan class=\"hljs-keyword\"\u003eheader\u003c/span\u003e.equals(\"XMLHttpRequest\")){\n                response.setContentType(\"text/html;charset=utf-8\");\n                response.setCharacterEncoding(\"utf-8\");\n                PrintWriter o = response.getWriter();\n                o.\u003cspan class=\"hljs-keyword\"\u003ewrite\u003c/span\u003e(\u003cspan class=\"hljs-type\"\u003eJSON\u003c/span\u003e.toJSONString(AjaxResult.fail(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \"用户未登录\",\u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e)));\n            }\n            \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e{\n                response.sendRedirect(request.getContextPath()+\"/user/login.action\");\n            }\n\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e;\n        }\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e;\n    }\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eweb.xml :设置session失效时间\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-xml\"\u003e  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e\u0026lt;!--    session失效时间：15分钟--\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e15\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/body\u003e\u003c/html\u003e\n  "])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"article_pageBody__Bryg4\",\"children\":[[\"$\",\"$Le\",null,{\"menuItemList\":[{\"id\":0,\"label\":\"首页\",\"href\":\"/\",\"icon\":\"/icons/home_gray.svg\",\"iconSelected\":\"/icons/home_black.svg\"},{\"id\":1,\"label\":\"文章\",\"href\":\"/articles/all/1\",\"icon\":\"/icons/article_gray.svg\",\"iconSelected\":\"/icons/article_black.svg\"},{\"id\":3,\"label\":\"关于\",\"href\":\"/about\",\"icon\":\"/icons/about_gray.svg\",\"iconSelected\":\"/icons/about_black.svg\"},{\"id\":4,\"label\":\"搜索\",\"href\":\"/search\",\"icon\":\"/icons/search_gray.svg\",\"iconSelected\":\"/icons/search_black.svg\"}],\"currentSelectedLabel\":\"文章\"}],[\"$\",\"div\",null,{\"className\":\"article_pageBodyMain___x_AF\",\"children\":[[\"$\",\"$Lf\",null,{}],[\"$\",\"div\",null,{\"className\":\"article_articleContainer__uRwUh scrollContent\",\"children\":[[\"$\",\"div\",null,{\"className\":\"article_articleBody__0coIY scrollContent\",\"children\":[[\"$\",\"h1\",null,{\"style\":{\"marginBottom\":\"0.1rem\",\"marginTop\":\"0.2rem\"},\"children\":\"9月23日Spring笔记\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"tags_tags__qM_Ja\",\"children\":[[\"$\",\"p\",null,{\"className\":\"tags_label__Rg6b2\",\"children\":\"分类\"}],[[\"$\",\"$L10\",\"0\",{\"href\":\"/articles/新知笔记/1\",\"children\":[\"$\",\"p\",\"0\",{\"className\":\"tags_tag__HZYxk tags_tagLink__gnw9V\",\"children\":\"新知笔记\"}]}],[\"$\",\"$L10\",\"1\",{\"href\":\"/articles/后端学习/1\",\"children\":[\"$\",\"p\",\"1\",{\"className\":\"tags_tag__HZYxk tags_tagLink__gnw9V\",\"children\":\"后端学习\"}]}]],false]}],[\"$\",\"div\",null,{\"className\":\"tags_tags__qM_Ja\",\"children\":[[\"$\",\"p\",null,{\"className\":\"tags_label__Rg6b2\",\"children\":\"标签\"}],\"$undefined\",[[\"$\",\"p\",\"0\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"java\"}],[\"$\",\"p\",\"1\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"后端\"}],[\"$\",\"p\",\"2\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"spring\"}],[\"$\",\"p\",\"3\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"springMVC\"}],[\"$\",\"p\",\"4\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"文件上传\"}]]]}]]}],[\"$\",\"article\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}],[\"$\",\"$L12\",null,{}],[\"$\",\"div\",null,{\"className\":\"bottomBar_bottomBar__uHU1W\",\"children\":[\"$\",\"div\",null,{\"className\":\"bottomBar_text__iz3cM\",\"children\":[\"Powerd by\",[\"$\",\"a\",null,{\"href\":\"https://github.com/hixyl/YlBlog\",\"children\":\" YlBlog(玉龙博客)\"}]]}]}]]}],[\"$\",\"$L13\",null,{}]]}]]}],[\"$\",\"$L14\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"9月23日Spring笔记 - 流年石刻\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"3\",{\"name\":\"next-size-adjust\"}]]\n"])</script></body></html>