<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/cb8e7b5b12152d96.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/db5abb62272553e3.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/99f6a99e5e57ec87.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-ab63a8f0e89a5e28.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-2a48348db6e9e5e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-38dca328e8a8de9d.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-d4767c0c82b0abc6.js" as="script"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-N3DJ3JTVT2"/><link rel="icon" href="/favicon.png?&lt;generated&gt;" type="image/&lt;generated&gt;" sizes="&lt;generated&gt;"/><title>linux桌面版配置aria2教程(以ubuntu22.04为例) - 流年石刻</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f"><div class="article_pageBody__Bryg4"><div class="header_header__us6ao"><div class="header_topHeader__xNJQ1"><a href="/"><div class="header_logo__IbzcJ">流年石刻</div></a><div class="menu_menuBox__ZCxZE"><a href="/"><p style="--icon-unSelected:url(/icons/home_gray.svg);--icon-selected:url(/icons/home_black.svg)" class="menu_navListItem__znGi9">首页</p></a><a href="/articles/all/1/"><p style="--icon-unSelected:url(/icons/article_gray.svg);--icon-selected:url(/icons/article_black.svg)" class="menu_navListItemSelected__JZBTq">文章</p></a><a href="/about/"><p style="--icon-unSelected:url(/icons/about_gray.svg);--icon-selected:url(/icons/about_black.svg)" class="menu_navListItem__znGi9">关于</p></a><a href="/search/"><p style="--icon-unSelected:url(/icons/search_gray.svg);--icon-selected:url(/icons/search_black.svg)" class="menu_navListItem__znGi9">搜索</p></a></div><div class="header_iconArea__Co05n"><img alt="menu" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" class="header_menuIcon__7dQN0" style="color:transparent" src="/_next/static/media/menu.c309d6d5.svg"/></div></div><div class="mobileMenu_mobileMenu__Mz_1e mobileMenu_menuContainer__hndoP "><a href="/"><div style="--icon-unSelected:url(/icons/home_gray.svg);--icon-selected:url(/icons/home_black.svg)" class="mobileMenu_item__pY1st ">首页</div></a><a href="/articles/all/1/"><div style="--icon-unSelected:url(/icons/article_gray.svg);--icon-selected:url(/icons/article_black.svg)" class="mobileMenu_item__pY1st mobileMenu_itemSelected__d5YAL">文章</div></a><a href="/about/"><div style="--icon-unSelected:url(/icons/about_gray.svg);--icon-selected:url(/icons/about_black.svg)" class="mobileMenu_item__pY1st ">关于</div></a><a href="/search/"><div style="--icon-unSelected:url(/icons/search_gray.svg);--icon-selected:url(/icons/search_black.svg)" class="mobileMenu_item__pY1st ">搜索</div></a></div></div><div class="article_pageBodyMain___x_AF"><div class="sidebar_sidebar__6HDFv sidebar_open__ia_Zv"><div class="sidebar_sidebarInner__NiyBR"><div class="topImgBox_topImgBox__2OSEr"><img alt="" loading="lazy" width="1024" height="1024" decoding="async" data-nimg="1" class="topImgBox_topImg__6hmTH" style="color:transparent" src="/_next/static/media/author.2cacf696.jpg"/><div class="topImgBox_textArea__iSnnz"><div class="topImgBox_author__URTnh">星玉龙</div><div class="topImgBox_position__7qz_f">前端工程师</div><a class="topImgBox_email__skkTy" href="mailto:me@timeshike.com">me@timeshike.com</a><a class="topImgBox_githubBtn__YYbAh" href="https://github.com/hixyl">Github</a><div class="topImgBox_content__lmDiZ">闲云潭影，物换星移<br/>滕王高阁，几度春秋<br/>故人不在，长江空流<br/>月圆复缺，岁月悠悠<br/></div><div class="topImgBox_bottomBtns__EIkFU"><a href="/atom.xml"><img alt="rss" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/rss.d066fc0f.svg"/></a></div></div></div></div><div class="sidebar_btnArea__Wtf3d"><div class="sidebar_btnRect__RQ7s5"><img alt="rightArray" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="sidebar_imgBtn__gmp3y" style="color:transparent" src="/_next/static/media/left_array.0dce0964.svg"/></div></div></div><div class="article_articleContainer__uRwUh scrollContent"><div class="article_articleBody__0coIY scrollContent"><h1 style="margin-bottom:0.1rem;margin-top:0.2rem">linux桌面版配置aria2教程(以ubuntu22.04为例)</h1><div><div class="tags_tags__qM_Ja"><p class="tags_label__Rg6b2">分类</p><a href="/articles/linux相关/1/"><p class="tags_tag__HZYxk tags_tagLink__gnw9V">linux相关</p></a></div><div class="tags_tags__qM_Ja"><p class="tags_label__Rg6b2">标签</p><p class="tags_tag__HZYxk ">linux</p><p class="tags_tag__HZYxk ">ubuntu</p><p class="tags_tag__HZYxk ">aria2</p><p class="tags_tag__HZYxk ">systemctl</p><p class="tags_tag__HZYxk ">下载</p></div></div><article>
    <p class="time">发布时间：<time datetime="04 May, 2023">2023-05-04 10:50:13</time></p>
    <p class="words">本文字数：557 字       阅读完需：约 2 分钟</p>
    <html><head></head><body><h2>安装aria2</h2>
<pre><code class="language-shell">sudo apt <span class="hljs-keyword">install</span> aria2
</code></pre>
<h2>新建配置文件</h2>
<p>新建 <code>~<span class="hljs-regexp">/.aria2/</span>aria2.conf</code> 文件，内容如下(下载文件保存位置根据实际情况修改)</p>
<pre><code class="language-conf"><span class="hljs-comment">#允许rpc</span>
<span class="hljs-attr">enable-rpc</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#允许所有来源, web界面跨域权限需要</span>
<span class="hljs-attr">rpc-allow-origin-all</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#允许非外部访问</span>
<span class="hljs-attr">rpc-listen-all</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#RPC端口, 仅当默认端口被占用时修改</span>
<span class="hljs-comment">#rpc-listen-port=6800</span>
 
<span class="hljs-comment">#最大同时下载数(任务数), 路由建议值: 3</span>
<span class="hljs-attr">max-concurrent-downloads</span>=<span class="hljs-number">5</span>
<span class="hljs-comment">#断点续传</span>
<span class="hljs-attr">continue</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#同服务器连接数</span>
<span class="hljs-attr">max-connection-per-server</span>=<span class="hljs-number">5</span>
<span class="hljs-comment">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span>
<span class="hljs-attr">min-split-size</span>=<span class="hljs-number">10</span>M
<span class="hljs-comment">#单文件最大线程数, 路由建议值: 5</span>
<span class="hljs-attr">split</span>=<span class="hljs-number">10</span>
<span class="hljs-comment">#下载速度限制</span>
<span class="hljs-attr">max-overall-download-limit</span>=<span class="hljs-number">0</span>
<span class="hljs-comment">#单文件速度限制</span>
<span class="hljs-attr">max-download-limit</span>=<span class="hljs-number">0</span>
<span class="hljs-comment">#上传速度限制</span>
<span class="hljs-attr">max-overall-upload-limit</span>=<span class="hljs-number">0</span>
<span class="hljs-comment">#单文件速度限制</span>
<span class="hljs-attr">max-upload-limit</span>=<span class="hljs-number">0</span>
<span class="hljs-comment">#断开速度过慢的连接</span>
<span class="hljs-comment">#lowest-speed-limit=0</span>
<span class="hljs-comment">#验证用，需要1.16.1之后的release版本</span>
<span class="hljs-comment">#referer=*</span>
 
<span class="hljs-attr">input-file</span>=/var/log/aria2.session
<span class="hljs-attr">save-session</span>=/var/log/aria2_.session
<span class="hljs-comment">#定时保存会话，需要1.16.1之后的release版</span>
<span class="hljs-attr">save-session-interval</span>=<span class="hljs-number">60</span>
 
<span class="hljs-comment">#文件保存路径, 默认为当前启动位置</span>
<span class="hljs-attr">dir</span>=/home/smile/Downloads/
<span class="hljs-comment">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span>
<span class="hljs-comment">#disk-cache=0</span>
<span class="hljs-comment">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span>
<span class="hljs-comment">#enable-mmap=true</span>
<span class="hljs-comment">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span>
<span class="hljs-comment">#所需时间 none &lt; falloc ? trunc &lt;&lt; prealloc, falloc和trunc需要文件系统和内核支持</span>
<span class="hljs-attr">file-allocation</span>=prealloc
<span class="hljs-comment">#启用本地节点查找</span>
<span class="hljs-attr">bt-enable-lpd</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#添加额外的tracker</span>
<span class="hljs-comment">#bt-tracker=&lt;URI&gt;,…</span>
<span class="hljs-comment">#单种子最大连接数</span>
<span class="hljs-comment">#bt-max-peers=55</span>
<span class="hljs-comment">#强制加密, 防迅雷必备</span>
<span class="hljs-comment">#bt-require-crypto=true</span>
<span class="hljs-comment">#当下载的文件是一个种子(以.torrent结尾)时, 自动下载BT</span>
<span class="hljs-attr">follow-torrent</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#BT监听端口, 当端口屏蔽时使用</span>
<span class="hljs-comment">#listen-port=6881-6999</span>
 
<span class="hljs-comment">#不确定是否需要，为保险起见，need more test</span>
<span class="hljs-attr">enable-dht</span>=<span class="hljs-literal">false</span>
<span class="hljs-attr">bt-enable-lpd</span>=<span class="hljs-literal">false</span>
<span class="hljs-attr">enable-peer-exchange</span>=<span class="hljs-literal">false</span>
<span class="hljs-comment">#修改特征</span>
<span class="hljs-attr">user-agent</span>=uTorrent/<span class="hljs-number">2210</span>(<span class="hljs-number">25130</span>)
<span class="hljs-attr">peer-id-prefix</span>=-UT2210-
<span class="hljs-comment">#修改做种设置, 允许做种</span>
<span class="hljs-attr">seed-ratio</span>=<span class="hljs-number">0</span>
<span class="hljs-comment">#保存会话</span>
<span class="hljs-attr">force-save</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">bt-hash-check-seed</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">bt-seed-unverified</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">bt-save-metadata</span>=<span class="hljs-literal">true</span>
<span class="hljs-comment">#定时保存会话，需要1.16.1之后的某个release版本（比如1.16.2）</span>
<span class="hljs-comment">#save-session-interval=60</span>
</code></pre>
<h2>新建log文件</h2>
<pre><code class="language-shell">sudo touch /<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/aria2.session
sudo touch /<span class="hljs-keyword">var</span>/<span class="hljs-built_in">log</span>/aria2_.session
</code></pre>
<h2>配置系统服务</h2>
<p>新建 <code><span class="hljs-regexp">/lib/</span>systemd<span class="hljs-regexp">/system/</span>aria2.service</code>，配置如下</p>
<pre><code class="language-conf"><span class="hljs-attr">Description</span>= aria2
<span class="hljs-attr">After</span>=network.target
 
<span class="hljs-section">[Service]</span>
<span class="hljs-attr">User</span>=smile
<span class="hljs-attr">Group</span>=smile

<span class="hljs-comment">#PIDFile=/run/aria2.pid</span>
<span class="hljs-attr">ExecStart</span>=aria2c -c --conf-path=/home/smile/.aria2/aria2.conf &amp;
<span class="hljs-attr">ExecStop</span>=/bin/kill <span class="hljs-variable">$MAINPID</span>
<span class="hljs-attr">RestartSec</span>=always
 
<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<h2>开启服务</h2>
<pre><code class="language-shell">sudo systemctl <span class="hljs-keyword">enable</span> aria2 <span class="hljs-comment">--now</span>
</code></pre>
</body></html>
  </article><div class="Toastify"></div></div></div></div></div><script src="/_next/static/chunks/webpack-ab63a8f0e89a5e28.js" async=""></script><script src="/_next/static/chunks/fd9d1056-2a48348db6e9e5e0.js" async=""></script><script src="/_next/static/chunks/596-38dca328e8a8de9d.js" async=""></script><script src="/_next/static/chunks/main-app-d4767c0c82b0abc6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/cb8e7b5b12152d96.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/db5abb62272553e3.css\",{\"as\":\"style\"}]\n5:HL[\"/_next/static/css/99f6a99e5e57ec87.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"6:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-ab63a8f0e89a5e28.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\n8:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-ab63a8f0e89a5e28.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"GlobalError\",\"async\":false}\n9:I{\"id\":3015,\"chunks\":[\"185:static/chunks/app/layout-8aa3a6cc59f9dfc4.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":77"])</script><script>self.__next_f.push([1,"67,\"chunks\":[\"272:static/chunks/webpack-ab63a8f0e89a5e28.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-ab63a8f0e89a5e28.js\",\"971:static/chunks/fd9d1056-2a48348db6e9e5e0.js\",\"596:static/chunks/596-38dca328e8a8de9d.js\"],\"name\":\"default\",\"async\":false}\nd:I{\"id\":5345,\"chunks\":[\"185:static/chunks/app/layout-8aa3a6cc59f9dfc4.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/cb8e7b5b12152d96.css\",\"precedence\":\"next\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"GDfWBrFbIPS63gwjVSFMo\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/article/linux%E6%A1%8C%E9%9D%A2%E7%89%88%E9%85%8D%E7%BD%AEaria2%E6%95%99%E7%A8%8B-%E4%BB%A5ubuntu22-04%E4%B8%BA%E4%BE%8B/\",\"initialTree\":[\"\",{\"children\":[\"article\",{\"children\":[[\"id\",\"linux%E6%A1%8C%E9%9D%A2%E7%89%88%E9%85%8D%E7%BD%AEaria2%E6%95%99%E7%A8%8B-%E4%BB%A5ubuntu22-04%E4%B8%BA%E4%BE%8B\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"linux桌面版配置aria2教程-以ubuntu22-04为例\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L7\",\"globalErrorComponent\":\"$8\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"zh\",\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.png?\u003cgenerated\u003e\",\"type\":\"image/\u003cgenerated\u003e\",\"sizes\":\"\u003cgenerated\u003e\"}],[\"$\",\"$L9\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-N3DJ3JTVT2\"}],[\"$\",\"$L9\",null,{\"id\":\"google-analytics\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n        \\n          gtag('config', 'G-N3DJ3JTVT2');\\n        \"}],[\"$\",\"body\",null,{\"className\":\"__className_20951f\",\"children\":[[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\",[\"id\",\"linux%E6%A1%8C%E9%9D%A2%E7%89%88%E9%85%8D%E7%BD%AEaria2%E6%95%99%E7%A8%8B-%E4%BB%A5ubuntu22-04%E4%B8%BA%E4%BE%8B\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",null],\"segment\":\"__PAGE__?{\\\"id\\\":\\\"linux桌面版配置aria2教程-以ubuntu22-04为例\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/db5abb62272553e3.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/99f6a99e5e57ec87.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"id\",\"linux%E6%A1%8C%E9%9D%A2%E7%89%88%E9%85%8D%E7%BD%AEaria2%E6%95%99%E7%A8%8B-%E4%BB%A5ubuntu22-04%E4%B8%BA%E4%BE%8B\",\"d\"]},\"styles\":[]}],\"segment\":\"article\"},\"styles\":[]}],[\"$\",\"$Ld\",null,{}]]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":4733,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":6697,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\n10:I{\"id\":6685,\"chunks\":[\"16"])</script><script>self.__next_f.push([1,"5:static/chunks/165-9f67d2f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\n12:I{\"id\":8914,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":2953,\"chunks\":[\"165:static/chunks/165-9f67d2"])</script><script>self.__next_f.push([1,"f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\n14:I{\"id\":633,\"chunks\":[\"165:static/chunks/165-9f67d2f80e9188a0.js\",\"40:static/chunks/40-edcd3a895218fdbb.js\",\"420:static/chunks/420-3fbd00907cd73876.js\",\"241:static/chunks/app/article/[id]/page-499586c0005acdc2.js\"],\"name\":\"\",\"async\":false}\n11:T1d12,"])</script><script>self.__next_f.push([1,"\n    \u003cp class=\"time\"\u003e发布时间：\u003ctime datetime=\"04 May, 2023\"\u003e2023-05-04 10:50:13\u003c/time\u003e\u003c/p\u003e\n    \u003cp class=\"words\"\u003e本文字数：557 字       阅读完需：约 2 分钟\u003c/p\u003e\n    \u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003ch2\u003e安装aria2\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo apt \u003cspan class=\"hljs-keyword\"\u003einstall\u003c/span\u003e aria2\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e新建配置文件\u003c/h2\u003e\n\u003cp\u003e新建 \u003ccode\u003e~\u003cspan class=\"hljs-regexp\"\u003e/.aria2/\u003c/span\u003earia2.conf\u003c/code\u003e 文件，内容如下(下载文件保存位置根据实际情况修改)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-conf\"\u003e\u003cspan class=\"hljs-comment\"\u003e#允许rpc\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenable-rpc\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#允许所有来源, web界面跨域权限需要\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003erpc-allow-origin-all\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#允许非外部访问\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003erpc-listen-all\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#RPC端口, 仅当默认端口被占用时修改\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#rpc-listen-port=6800\u003c/span\u003e\n \n\u003cspan class=\"hljs-comment\"\u003e#最大同时下载数(任务数), 路由建议值: 3\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-concurrent-downloads\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#断点续传\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003econtinue\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#同服务器连接数\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-connection-per-server\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emin-split-size\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003eM\n\u003cspan class=\"hljs-comment\"\u003e#单文件最大线程数, 路由建议值: 5\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003esplit\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#下载速度限制\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-overall-download-limit\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#单文件速度限制\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-download-limit\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#上传速度限制\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-overall-upload-limit\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#单文件速度限制\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emax-upload-limit\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#断开速度过慢的连接\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#lowest-speed-limit=0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#验证用，需要1.16.1之后的release版本\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#referer=*\u003c/span\u003e\n \n\u003cspan class=\"hljs-attr\"\u003einput-file\u003c/span\u003e=/var/log/aria2.session\n\u003cspan class=\"hljs-attr\"\u003esave-session\u003c/span\u003e=/var/log/aria2_.session\n\u003cspan class=\"hljs-comment\"\u003e#定时保存会话，需要1.16.1之后的release版\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003esave-session-interval\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e\n \n\u003cspan class=\"hljs-comment\"\u003e#文件保存路径, 默认为当前启动位置\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edir\u003c/span\u003e=/home/smile/Downloads/\n\u003cspan class=\"hljs-comment\"\u003e#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#disk-cache=0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#enable-mmap=true\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#所需时间 none \u0026lt; falloc ? trunc \u0026lt;\u0026lt; prealloc, falloc和trunc需要文件系统和内核支持\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003efile-allocation\u003c/span\u003e=prealloc\n\u003cspan class=\"hljs-comment\"\u003e#启用本地节点查找\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebt-enable-lpd\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#添加额外的tracker\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#bt-tracker=\u0026lt;URI\u0026gt;,…\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#单种子最大连接数\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#bt-max-peers=55\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#强制加密, 防迅雷必备\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#bt-require-crypto=true\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#当下载的文件是一个种子(以.torrent结尾)时, 自动下载BT\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003efollow-torrent\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#BT监听端口, 当端口屏蔽时使用\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#listen-port=6881-6999\u003c/span\u003e\n \n\u003cspan class=\"hljs-comment\"\u003e#不确定是否需要，为保险起见，need more test\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenable-dht\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebt-enable-lpd\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenable-peer-exchange\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#修改特征\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003euser-agent\u003c/span\u003e=uTorrent/\u003cspan class=\"hljs-number\"\u003e2210\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e25130\u003c/span\u003e)\n\u003cspan class=\"hljs-attr\"\u003epeer-id-prefix\u003c/span\u003e=-UT2210-\n\u003cspan class=\"hljs-comment\"\u003e#修改做种设置, 允许做种\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eseed-ratio\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#保存会话\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eforce-save\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebt-hash-check-seed\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebt-seed-unverified\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebt-save-metadata\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#定时保存会话，需要1.16.1之后的某个release版本（比如1.16.2）\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#save-session-interval=60\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e新建log文件\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo touch /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/\u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e/aria2.session\nsudo touch /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/\u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e/aria2_.session\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e配置系统服务\u003c/h2\u003e\n\u003cp\u003e新建 \u003ccode\u003e\u003cspan class=\"hljs-regexp\"\u003e/lib/\u003c/span\u003esystemd\u003cspan class=\"hljs-regexp\"\u003e/system/\u003c/span\u003earia2.service\u003c/code\u003e，配置如下\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-conf\"\u003e\u003cspan class=\"hljs-attr\"\u003eDescription\u003c/span\u003e= aria2\n\u003cspan class=\"hljs-attr\"\u003eAfter\u003c/span\u003e=network.target\n \n\u003cspan class=\"hljs-section\"\u003e[Service]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eUser\u003c/span\u003e=smile\n\u003cspan class=\"hljs-attr\"\u003eGroup\u003c/span\u003e=smile\n\n\u003cspan class=\"hljs-comment\"\u003e#PIDFile=/run/aria2.pid\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eExecStart\u003c/span\u003e=aria2c -c --conf-path=/home/smile/.aria2/aria2.conf \u0026amp;\n\u003cspan class=\"hljs-attr\"\u003eExecStop\u003c/span\u003e=/bin/kill \u003cspan class=\"hljs-variable\"\u003e$MAINPID\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eRestartSec\u003c/span\u003e=always\n \n\u003cspan class=\"hljs-section\"\u003e[Install]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eWantedBy\u003c/span\u003e=multi-user.target\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e开启服务\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo systemctl \u003cspan class=\"hljs-keyword\"\u003eenable\u003c/span\u003e aria2 \u003cspan class=\"hljs-comment\"\u003e--now\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/body\u003e\u003c/html\u003e\n  "])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"article_pageBody__Bryg4\",\"children\":[[\"$\",\"$Le\",null,{\"menuItemList\":[{\"id\":0,\"label\":\"首页\",\"href\":\"/\",\"icon\":\"/icons/home_gray.svg\",\"iconSelected\":\"/icons/home_black.svg\"},{\"id\":1,\"label\":\"文章\",\"href\":\"/articles/all/1\",\"icon\":\"/icons/article_gray.svg\",\"iconSelected\":\"/icons/article_black.svg\"},{\"id\":3,\"label\":\"关于\",\"href\":\"/about\",\"icon\":\"/icons/about_gray.svg\",\"iconSelected\":\"/icons/about_black.svg\"},{\"id\":4,\"label\":\"搜索\",\"href\":\"/search\",\"icon\":\"/icons/search_gray.svg\",\"iconSelected\":\"/icons/search_black.svg\"}],\"currentSelectedLabel\":\"文章\"}],[\"$\",\"div\",null,{\"className\":\"article_pageBodyMain___x_AF\",\"children\":[[\"$\",\"$Lf\",null,{}],[\"$\",\"div\",null,{\"className\":\"article_articleContainer__uRwUh scrollContent\",\"children\":[[\"$\",\"div\",null,{\"className\":\"article_articleBody__0coIY scrollContent\",\"children\":[[\"$\",\"h1\",null,{\"style\":{\"marginBottom\":\"0.1rem\",\"marginTop\":\"0.2rem\"},\"children\":\"linux桌面版配置aria2教程(以ubuntu22.04为例)\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"tags_tags__qM_Ja\",\"children\":[[\"$\",\"p\",null,{\"className\":\"tags_label__Rg6b2\",\"children\":\"分类\"}],[[\"$\",\"$L10\",\"0\",{\"href\":\"/articles/linux相关/1\",\"children\":[\"$\",\"p\",\"0\",{\"className\":\"tags_tag__HZYxk tags_tagLink__gnw9V\",\"children\":\"linux相关\"}]}]],false]}],[\"$\",\"div\",null,{\"className\":\"tags_tags__qM_Ja\",\"children\":[[\"$\",\"p\",null,{\"className\":\"tags_label__Rg6b2\",\"children\":\"标签\"}],\"$undefined\",[[\"$\",\"p\",\"0\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"linux\"}],[\"$\",\"p\",\"1\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"ubuntu\"}],[\"$\",\"p\",\"2\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"aria2\"}],[\"$\",\"p\",\"3\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"systemctl\"}],[\"$\",\"p\",\"4\",{\"className\":\"tags_tag__HZYxk \",\"children\":\"下载\"}]]]}]]}],[\"$\",\"article\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}],[\"$\",\"$L12\",null,{}]]}],[\"$\",\"$L13\",null,{}]]}]]}],[\"$\",\"$L14\",null,{}]]}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"linux桌面版配置aria2教程(以ubuntu22.04为例) - 流年石刻\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"3\",{\"name\":\"next-size-adjust\"}]]\n"])</script></body></html>